server {
	access_log /var/log/nginx/lorenz_logs.log custom_log;
	listen 80;
	server_name lorenz.keefer.de; 
	return 301 https://lorenz.keefer.de$request_uri;
}
server {
	access_log /var/log/nginx/lorenz_logs.log custom_log;
	listen 80;
	server_name keefer.de; 
	return 301 https://keefer.de$request_uri;
}
server {
	access_log /var/log/nginx/access_logs.log custom_log;
	listen 443 ssl;
	server_name keefer.de lorenz.keefer.de;

	location /.well-known/acme-challenge/ {
		root /etc/letsencrypt;	
}
	location / {
		proxy_pass http://frontend:8000/;
	}
}

server {
	access_log /var/log/nginx/lorenz_logs.log custom_log;
	listen 80;
	listen 443 ssl;
	server_name dns.keefer.de; 
	location / {
		proxy_pass http://pihole:80/;
		proxy_set_header Host $host;
		proxy_set_header X-Real-IP $remote_addr;
	}
}
server {
	access_log /var/log/nginx/lorenz_logs.log custom_log;
	listen 80;
	listen 443 ssl;
	server_name cloud.keefer.de; 

	location /.well-known/acme-challenge/ {
		root /etc/letsencrypt;	
	}

	client_max_body_size 100M;
	location / {
		proxy_pass http://nextcloud:80/;
		proxy_set_header Host $host;
		proxy_set_header X-Real-IP $remote_addr;
	}
}
server {
	access_log /var/log/nginx/lorenz_logs.log custom_log;
	listen 80;
	server_name vaultwarden.keefer.de; 
	return 301 https://vaultwarden.keefer.de$request_uri;
}
server {
	access_log /var/log/nginx/lorenz_logs.log custom_log;
	listen 443 ssl;
	server_name vaultwarden.keefer.de; 

	location /.well-known/acme-challenge/ {
		root /etc/letsencrypt;	
	}
	location / {
		proxy_pass http://vaultwarden:80/;
		proxy_set_header Host $host;
		proxy_set_header X-Real-IP $remote_addr;
	}
}
server {
	access_log /var/log/nginx/lorenz_logs.log custom_log;
	listen 80;
	server_name blog.keefer.de; 
	return 301 https://blog.keefer.de$request_uri;
}
server {
	access_log /var/log/nginx/lorenz_logs.log custom_log;
	listen 443 ssl;
	server_name blog.keefer.de; 


	location /.well-known/acme-challenge/ {
		root /etc/letsencrypt;	
	}
	client_max_body_size 300M;
	location / {
		proxy_pass http://wordpress:80/;
		proxy_set_header Host $host;
		proxy_set_header X-Real-IP $remote_addr;
		proxy_set_header X-Forwarded-Proto https;
	}
}
server {
	access_log /var/log/nginx/lorenz_logs.log custom_log;
	listen 80;
	server_name tickets.blcksky.de; 
	return 301 https://tickets.blcksky.de$request_uri;
}
server {
	access_log /var/log/nginx/lorenz_logs.log custom_log;
	listen 443 ssl;
	server_name tickets.blcksky.de; 

	location /.well-known/acme-challenge/ {
		root /etc/letsencrypt;	
	}

	location / {
		proxy_pass http://frontend:8080;
		proxy_set_header Host $host;
		proxy_set_header X-Real-IP $remote_addr;
	}
}
server {
	access_log /var/log/nginx/lorenz_logs.log custom_log;
	listen 80;
	server_name keycloak.keefer.de; 
	location /.well-known/acme-challenge/ {
		root /etc/letsencrypt;	
	}
	location / {
		return 301 https://keycloak.keefer.de$request_uri;
	}
}
server {
	access_log /var/log/nginx/lorenz_logs.log custom_log;
	listen 443 ssl;
	server_name keycloak.keefer.de; 


        set $upstream http://keycloak:8080/;

	server_name adminer.keefer.de; 


        set $upstream http://adminer:8080/;

	location / {
		proxy_pass $upstream;
		proxy_set_header Host $host;
		proxy_set_header X-Real-IP $remote_addr;
	}
}
server {
	access_log /var/log/nginx/lorenz_logs.log custom_log;
	listen 80;
	server_name portainer.keefer.de; 
	location /.well-known/acme-challenge/ {
		root /etc/letsencrypt;	
	}
	location / {
		return 301 https://portainer.keefer.de$request_uri;
	}
}
server {
	access_log /var/log/nginx/lorenz_logs.log custom_log;
	listen 443 ssl;
	server_name portainer.keefer.de; 

	location / {
		proxy_pass http://portainer:9000;
		proxy_set_header Host $host;
		proxy_set_header X-Real-IP $remote_addr;
	}
}
#server {
#	access_log /var/log/nginx/lorenz_logs.log custom_log;
#	listen 80;
#	server_name jenkins.keefer.de; 
#	location /.well-known/acme-challenge/ {
#		root /etc/letsencrypt;	
#	}
#	location / {
#		return 301 https://jenkins.keefer.de$request_uri;
#	}
#}
#server {
#	access_log /var/log/nginx/lorenz_logs.log custom_log;
#	listen 443 ssl;
#	server_name jenkins.keefer.de; 
#
#	location / {
#		proxy_pass http://jenkeins:8080; 
#		proxy_set_header Host $host;
#		proxy_set_header X-Real-IP $remote_addr;
#	}
#}
